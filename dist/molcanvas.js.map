{"version":3,"sources":["../src/intro.js","../.tmp/es5/.tmp/es6/concat.js","../src/outro.js"],"names":[],"mappings":"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","file":"molcanvas.js","sourcesContent":["(function(root) {","export default\nclass Canvas {\n\n  constructor(renderer) {\n    this.renderer = renderer;\n    renderer.world = new LiThree.World();\n    this.atoms = [];\n    this._display = false;\n    this._displays = [];\n\n    this._mode = false;\n    this._modes = [];\n\n    this._data = {};\n\n    this.orbitHelper = new OrbitHelper(this);\n\n    this._attachInteractive();\n  }\n\n  attach(molecule) {\n\n    var i;\n\n    for (i in molecule.atoms) {\n      let atom = molecule.atoms[i];\n      this.addAtom(atom);\n    }\n\n\n  }\n\n  addAtom(atom) {\n    this.atoms.push(atom);\n    var i;\n\n    atom.on('bond', function (bond) {\n\n    });\n\n    this._display.drawAtom(atom);\n\n    for (i in atom.bonds) {\n      let bond = atom.bonds[i];\n      this._display.drawBond(bond);\n    }\n  }\n\n  setMode(mode) {\n    if(this._mode) {\n      this._mode.down();\n    }\n\n    for (var i in this._modes) {\n      let _mode = this._modes[i];\n\n      if (_mode instanceof mode) {\n        this._mode = _mode;\n        this._mode.up();\n        return;\n      }\n    }\n\n    this._mode = new mode(this);\n    this._mode.create();\n    this._modes.push(this._mode);\n  }\n\n  setDisplay(display) {\n    if(this._display) {\n      this._display.down();\n    }\n\n    for (var i in this._displays) {\n      let _display = this._displays[i];\n\n      if (_display instanceof display) {\n        this._display = _display;\n        this._display.up();\n        return;\n      }\n    }\n\n    this._display = new display(this);\n    this._display.create();\n    this._displays.push(this._display);\n  }\n\n  unsetData(key) {\n    delete this._data[key];\n  }\n\n  setData(key, value = true) {\n    this._data[key] = value;\n  }\n\n  getData(key) {\n    return this._data[key];\n  }\n\n  hasData(key) {\n    return typeof this._data[key] !== 'undefined';\n  }\n\n  show() {\n    this.renderer.draw();\n    var _this = this;\n\n    if(this.getData('tween') && TWEEN) {\n      TWEEN.update();\n    }\n\n    requestAnimationFrame(function () {\n      _this.show();\n    });\n  }\n\n  _attachInteractive() {\n    var renderer = this.renderer;\n    var interactive = new LiThree.Interactive(renderer);\n\n    this.interactive = interactive;\n  }\n\n}\nexport default\nclass OrbitHelper {\n\n  constructor(canvas) {\n    this.canvas = canvas;\n\n    this.quaternion = new LiThree.Math.Quaternion();\n    this.matrix = null;\n\n    this.origin = new LiThree.Math.Vector3();\n    this.speed = 1;\n    this._getMatrix();\n  }\n\n  rotate(dx, dy) {\n    dx *= this.speed;\n    dy *= this.speed;\n\n    var\n      r = Math.sqrt(dx * dx + dy * dy),\n      dq = new LiThree.Math.Quaternion(1, 0, 0, 0),\n      cq = this.quaternion,\n      rs = Math.sin(r * Math.PI) / r;\n\n    dq.x = Math.cos(r * Math.PI);\n    dq.y = 0;\n    dq.z = rs * dx;\n    dq.w = -rs * dy;\n\n    this.quaternion = new LiThree.Math.Quaternion(1, 0, 0, 0);\n    this.quaternion.multiply(dq);\n    this.quaternion.multiply(cq);\n\n    this._getMatrix();\n  }\n\n  distance(delta) {\n    var canvas = this.canvas,\n      camera = canvas.renderer.camera;\n\n    delta *= this.speed / 50;\n\n    if (canvas.getData('tween')) {\n      var z = camera.position.z + delta;\n      new TWEEN.Tween(camera.position)\n        .to({z: z}, 200)\n        .easing(TWEEN.Easing.Cubic.Out)\n        .start();\n    } else {\n      camera.position.z += delta / 2;\n    }\n  }\n\n  _getMatrix() {\n    this.matrix = LiThree.Math.Matrix4.fromRotationTranslationScaleOrigin(this.quaternion, this.origin, new LiThree.Math.Vector3(1, 1, 1), this.origin);\n    return this.matrix;\n  }\n\n}\nexport default\nclass BaseDisplay {\n\n  constructor(canvas) {\n    this.canvas = canvas;\n    this._atoms = [];\n  }\n\n  drawAll() {\n\n  }\n\n}\nimport BaseDisplay from '_base.js';\n\nvar BAS_KEY = 'ball-and-stick';\n\nexport default\nclass BallAndStick extends BaseDisplay {\n\n  constructor(canvas) {\n    this.lights = [];\n    super(canvas);\n  }\n\n  drawLight() {\n\n    var light = new LiThree.Light.Point();\n\n    light.specularColor.rgb(0.2, 0.2, 0.2);\n    light.position.x = -30;\n    light.position.z = -60;\n    light.position.y = -30;\n\n    this.lights = [light];\n  }\n\n  drawAtom(atom) {\n    var canvas = this.canvas,\n      renderer = canvas.renderer,\n      world = renderer.world;\n\n    var position = atom.position;\n\n    var radius = Math.exp(-Math.pow(atom.element.atomicRadius - 91, 2) / 500) * atom.element.atomicRadius / 200;\n\n    var sphere = LiThree.ObjectFactory.Sphere(radius, 20, 20);\n\n    //sphere.drawingMode = LiThree.Common.drawingMode.LINES;\n    sphere.position.copy(position);\n\n    sphere.material.shininess = 10;\n    sphere.material.color.hex = atom.element.color;\n\n    world.add(sphere);\n\n    renderer.initShape(sphere);\n    this._orbitShader(sphere);\n    sphere.shader.create();\n\n    var elements = {\n      sphere: sphere,\n      position: sphere.position,\n      color: sphere.material.color,\n      radius: radius\n    };\n\n    atom.setData(BAS_KEY, elements);\n\n    if (canvas.getData('tween')) {\n      sphere.scale.set(0, 0, 0);\n\n      new TWEEN.Tween(sphere.scale)\n        .to({x: 1, y: 1, z: 1}, 500)\n        .easing(TWEEN.Easing.Elastic.Out)\n        .start();\n    }\n  }\n\n  drawBond(bond) {\n    var elements;\n    if (bond.hasData(BAS_KEY)) {\n      elements = bond.getData(BAS_KEY);\n    } else {\n      elements = {\n        cylinders: []\n      };\n      bond.setData(BAS_KEY, elements);\n    }\n\n    var renderer = this.canvas.renderer,\n      world = renderer.world,\n      begin = bond.begin,\n      end = bond.end,\n      beginD = begin.getData(BAS_KEY),\n      endD = end.getData(BAS_KEY);\n\n    if (!beginD || !endD) {\n      return;\n    }\n\n    var beginP = beginD.position,\n      endP = endD.position,\n      beginC = beginD.color,\n      endC = endD.color,\n      distance = beginP.distance(endP),\n      middle = beginP.clone().add(endP).divide(2),\n      deltaX = endP.x - beginP.x,\n      deltaY = endP.y - beginP.y,\n      deltaZ = endP.z - beginP.z,\n      d = 0.06;\n\n    var rotation = new LiThree.Math.Quaternion();\n    rotation.rotateZ(Math.atan2(deltaY, deltaX));\n    rotation.rotateY(-Math.asin(deltaZ / distance));\n\n    var c = (bond.order - 1) * d;\n\n    for (var i = 0; i < bond.order; i++) {\n      let cylinder = LiThree.ObjectFactory.Cylinder(distance, d, d);\n      cylinder.material.color = beginC;\n      this._programCylinderShader(cylinder, endC);\n      elements.cylinders.push(cylinder);\n\n      world.add(cylinder);\n    }\n\n    for (var j in elements.cylinders) {\n      let cylinder = elements.cylinders[j];\n\n      cylinder.rotation = rotation;\n      cylinder.position.copy(middle);\n      cylinder.position.y += j * d * 2.1 - c;\n    }\n\n  }\n\n  _programCylinderShader(cylinder, endC) {\n    renderer.initShape(cylinder);\n\n    var fragmentProgram = cylinder.shader.fragmentProgram,\n      vertexProgram = cylinder.shader.vertexProgram;\n\n    this._orbitShader(cylinder);\n\n    fragmentProgram.clear();\n\n    fragmentProgram.code(`vec3 effectiveColor = halfColor > 0.5 ? vColor : %c2; gl_FragColor = vec4(%lw + effectiveColor, 1.0);`, {\n      c2: fragmentProgram.uniform('vec3', function () {\n        this.value(endC.toArray());\n      }),\n      hc: fragmentProgram.varying('float', 'halfColor'),\n      lw: 'lightWeight'\n    });\n\n    vertexProgram.code(`%hc = %vp.x < 0.5 ? 1.0 : 0.0;`, {\n      lw: 'lightWeight',\n      vp: 'vPosition',\n      hc: vertexProgram.varying('float', 'halfColor')\n    });\n\n    cylinder.shader.create();\n  }\n\n  _orbitShader(object) {\n    var\n      vertexProgram = object.shader.vertexProgram,\n      orbitHelper = this.canvas.orbitHelper;\n\n    vertexProgram.clear();\n    vertexProgram.code('mat4 mvMatrix = %vm * %om * %mm;\\ngl_Position = %p * mvMatrix  * vec4(%vp, 1.0);', {\n      p: 'pMatrix',\n      vm: 'vMatrix',\n      mm: 'mMatrix',\n      vp: 'vPosition',\n      om: vertexProgram.uniform('mat4', function () {\n        this.value(orbitHelper.matrix);\n      })\n    });\n    object.shader.initLighting();\n  }\n\n  create() {\n    this.drawLight();\n    this.up();\n  }\n\n  up() {\n    var world = renderer.world;\n\n    for (var i in this.lights) {\n      world.add(this.lights[i]);\n    }\n  }\n\n  down() {\n    var world = renderer.world;\n\n    for (var i in this.lights) {\n      world.remove(this.lights[i]);\n    }\n\n  }\n\n}\nexport default\nclass EditorMode {\n\n  constructor(canvas) {\n    this.canvas = canvas;\n  }\n\n  up() {\n    var interactive = this.canvas.interactive;\n\n    interactive.on('drag', this._dragEvent);\n    interactive.on('click', this._clickEvent);\n    interactive.on('wheel', this._wheelEvent);\n  }\n\n  down() {\n    var interactive = this.canvas.interactive;\n\n    interactive.off('drag', this._dragEvent);\n    interactive.off('click', this._clickEvent);\n    interactive.off('wheel', this._wheelEvent);\n  }\n\n  create() {\n    var canvas = this.canvas,\n      camera = canvas.renderer.camera,\n      orbitHelper = canvas.orbitHelper;\n\n    this._wheelEvent = function (delta) {\n      orbitHelper.distance(delta);\n    };\n\n\n    this._clickEvent = function (point, unproject, e) {\n      var pos = unproject(0);\n      pos.unproject(orbitHelper.matrix.clone());\n      var atom = new Chem.Atom();\n      atom.position = pos;\n\n      atom.atomicNumber = 6;\n\n      var ray = LiThree.Math.Ray.fromPoints(camera.position, unproject(0));\n      var caster = new LiThree.RayCaster(ray);\n      var resu = caster.intersectTriangle(\n        new LiThree.Math.Vector3(-1, -1, 0),\n        new LiThree.Math.Vector3(-1, 1, 0),\n        new LiThree.Math.Vector3(1, 0, 0));\n\n      console.log(resu);\n      canvas.addAtom(atom);\n    };\n\n    this._dragEvent = function (point, delta, unproject, e) {\n      var position = unproject(0.5);\n\n      if (e.button === 0) {\n\n      } else if (e.button === 2) {\n\n      }\n\n    };\n\n    this.up();\n  }\n\n}\nexport default\nclass OrbitMode {\n\n  constructor(canvas) {\n    this.canvas = canvas;\n  }\n\n  up() {\n    var interactive = this.canvas.interactive;\n\n    interactive.on('drag', this._dragEvent);\n    interactive.on('wheel', this._wheelEvent);\n  }\n\n  down() {\n    var interactive = this.canvas.interactive;\n\n    interactive.off('drag', this._dragEvent);\n    interactive.off('wheel', this._wheelEvent);\n  }\n\n  create() {\n    var canvas = this.canvas,\n      camera = canvas.renderer.camera,\n      orbitHelper = canvas.orbitHelper;\n\n    this._wheelEvent = function (delta) {\n      orbitHelper.distance(delta);\n    };\n\n    this._dragEvent = function (point, delta, unproject, e) {\n      if (e.button === 0) {\n        var dx = -delta.x / 400,\n          dy = -delta.y / 400;\n\n        canvas.orbitHelper.rotate(dx, dy);\n      } else if (e.button === 2) {\n        e.preventDefault();\n        camera.position.x += -delta.x / 100;\n        camera.position.y += delta.y / 100;\n      }\n    };\n\n    this.up();\n  }\n\n\n}\n//# sourceMappingURL=concat.js.map","root.ChemCanvas = {\n  Canvas: Canvas,\n  Display: {\n    BallAndStick: BallAndStick\n  },\n  Mode: {\n    Orbit: OrbitMode,\n    Editor: EditorMode\n  }\n};\n})\n(this);"]}